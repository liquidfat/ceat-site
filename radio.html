<!DOCTYPE html>
<html lang="en">
    
<head>
    <title>ceat</title>
    <link href="css/style.css" rel="stylesheet" type="text/css">
  
    <meta charset="UTF-8">
    <meta name="description" content="Your description">
    <meta name="keywords" content="Your keywords">
    <meta name="author" content="Christopher Keatinge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
    
<body>
    
  <header class="header">
    <h1>ceat.fun</h1>

    <!-- Hamburger button -->
    <button class="hamburger" onclick="toggleMenu()">
      â˜°
    </button>

    <script>
      function toggleMenu() {
      const nav = document.getElementById('navMenu');
      nav.classList.toggle('active');
      }
      
      
    async function checkStreamStatus() {
    const img = document.getElementById('radioGif');
    const statusUrl = 'https://sapircast.caster.fm:12993/admin/publicstats.json';

    try {
      const response = await fetch(statusUrl);
      if (!response.ok) throw new Error('Network response not OK');

      const stats = await response.json();
      const sourceKey = Object.keys(stats[1].source)[0];
      const sourceData = stats[1].source[sourceKey];

      // If there are >0 listeners OR a streaming start time, consider it live
      if (sourceData.listeners > 0 || sourceData.stream_start_iso8601) {
        img.src = 'images/gifs/radio.gif';   // Live GIF
      } else {
        img.src = 'images/archive/radio-offline.jpg'; // Offline img
      }
    } catch (err) {
      console.error('Stream status check failed:', err);
      img.src = 'images/archive/radio-offline.jpg'; // Default fallback
    }
  }

          // Initial check and periodic updates
          checkStreamStatus();
          setInterval(checkStreamStatus, 10000); // every 10 seconds

         
    </script>  
    
    <!-- Navigation links -->
    <ul class="nav" id="navMenu">
      <li><a href="index.html">index</a></li>
      <li><a href="gallery.html">gallery</a></li>
      <li><a href="radio.html" style="color: #ff0077;">radio</a></li>
      <li><a href="contact.html">contact</a></li>
    </ul>
  </header>
    
  <p>UNDER CONSTRUCTION</p>
  
  <div id="audio-player">
      <button id="play-btn"></button>

      <div id="progress-container">
        <div id="progress"></div>
      </div>

      <audio id="audio" src="Audio/06 mutant standard.mp3"></audio>
      </div>
  
  <div class="row">
  
    <div class="col2">
      
        <div class="chat">
          <script id="cid0020000415294015084" data-cfasync="false" async src="//st.chatango.com/js/gz/emb.js">{"handle":"ceatfun","arch":"js","styles":{"a":"ff0077","b":100,"c":"000000","d":"000000","k":"ff0077","l":"ff0077","m":"ff0077","p":"10","q":"ff0077","r":100,"t":0,"usricon":0,"surl":0}}</script>
      </div>
    </div>
    
    
    <div class="col2">
      <div class="radio">
        <div data-type="newStreamPlayer" data-publicToken="e3056f6f-039e-438c-b24c-a9bdcf5f9bbc" data-theme="dark" data-color="0016FF" data-channelId="" data-rendered="false" class="cstrEmbed"><a href="https://www.caster.fm">Shoutcast Hosting</a> <a href="https://www.caster.fm">Stream Hosting</a> <a href="https://www.caster.fm">Radio Server Hosting</a></div><script src="//cdn.cloud.caster.fm//widgets/embed.js"></script>
        <img id="radioGif" class="radiogif" src="images/archive/radio-offline.jpg" alt="Radio status">
      </div>
      
    </div>
      
  </div>


  
<script>
const player = document.getElementById("audio-player");

let isDragging = false;
let offsetX = 0;
let offsetY = 0;

player.addEventListener("pointerdown", (e) => {
  isDragging = true;
  offsetX = e.clientX - player.offsetLeft;
  offsetY = e.clientY - player.offsetTop;
  player.style.cursor = "grabbing";
});

document.addEventListener("pointermove", (e) => {
  if (!isDragging) return;
  player.style.left = (e.clientX - offsetX) + "px";
  player.style.top = (e.clientY - offsetY) + "px";
});

document.addEventListener("pointerup", () => {
  isDragging = false;
  player.style.cursor = "grab";
});
</script>
  
<script>src="audioplay.js"</script>

</body>
    
</html>